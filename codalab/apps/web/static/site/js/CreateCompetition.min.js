function disableBeforeUnload(){window.onbeforeunload=null}var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},Competition;(function(n){var t=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.tabSelection=function(){$("#tabs").tabs("enable",parseInt($("#Step").val())-1).tabs("select",parseInt($("#Step").val())-1),t.prototype.activateSaveButtons()},t.prototype.tabOnClick=function(n){if(t.prototype.confirmNavigation()){var i=$(n).attr("id").length;$("#Step").val($(n).attr("id").substring(i-1,i)),t.prototype.tabSelection(),t.prototype.changeSaveButtonText(),t.prototype.activateSaveButtons()}},t.prototype.activateSaveButtons=function(){$("#Step").val()==="4"?$("#btnSave").hide():$("#btnSave").show()},t.prototype.changeSaveButtonText=function(){$("#Step").val()==="4"?$("#btnSaveConti").val("finish"):$("#btnSaveConti").val("next"),$("#Step").val()==="1"?$("#btnSavePrev").addClass("disabledStatus"):$("#btnSavePrev").removeClass("disabledStatus")},t.prototype.save=function(n,i){$("#SaveFlag").val("True");var r=parseInt($("#Step").val());switch(r){case 1:t.prototype.ajaxRequestForSavingCompetitionInfo(i),n.preventDefault();break;case 2:t.prototype.savePhases(i),n.preventDefault();break;case 3:$(i).removeClass("disabledStatus"),t.prototype.ajaxRequestForSavingCompetitionPageContent(i),n.preventDefault()}},t.prototype.saveContinue=function(n,i){t.prototype.nextStep(i,n)},t.prototype.setValueChanged=function(){$("#valueChanged").val("True")},t.prototype.ajaxRequestForSavingCompetitionInfo=function(i){var r={title:$("#Title").val(),description:$("#Description").val()};var u="/api/competition/"+parseInt($("#CompetitionId").val())+"/info",f=function(n){t.prototype.managePublishButton(n.published),$(i).removeClass("disabledStatus"),$("#valueChanged").val("")},e=function(){$(i).removeClass("disabledStatus")};n.prototype.ajaxJSONRequest.call(this,u,f,e,r)},t.prototype.managePublishButton=function(n){switch(n){case 1:$("#Public")[0].checked=!1,$("#btnPublish").addClass("disabledStatus");break;case 2:$("#Public")[0].checked=!0,$("#btnPublish").addClass("disabledStatus");break;case 3:$("#Public")[0].checked=!0,$("#btnPublish").removeClass("disabledStatus")}t.prototype.makePublicNotification()},t.prototype.makePublicNotification=function(){$("#Public")[0].checked&&!$("#btnPublish").hasClass("disabledStatus")?$("#publishNotoficationdiv,#publishNotoficationIcon").show():$("#publishNotoficationdiv,#publishNotoficationIcon").hide()},t.prototype.ajaxRequestForSavingCompetitionPageLabel=function(i){var f,r,u;$(i).closest("li").children(".buttonPreloaderInput").remove(),$(i).closest("li").append($(".buttonPreloaderInput").clone()),$(i).closest("li").children(".buttonPreloaderInput").show(),f=0,$(i).parent().parent().hasClass("viewStateOff")?$(i).attr("type")!==undefined?(f=1,r=$.trim($(i).parent().attr("id").replace("tab","")),u=u={rank:r,visible:"False",label:$(i).val()}):(r=$.trim($(i).parent().parent().attr("id").replace("tab","")),u=u={rank:r,visible:"False"}):$(i).attr("type")!==undefined?(f=1,r=$.trim($(i).parent().attr("id").replace("tab","")),u=u={rank:r,visible:"True",label:$(i).val()}):(r=$.trim($(i).parent().parent().attr("id").replace("tab","")),u={rank:r,visible:"True"});var e="/api/competition/"+parseInt($("#CompetitionId").val())+"/page",o=function(n){t.prototype.managePublishButton(n.published),f===1&&($(i).hide(),$(i).siblings("label").text($(i).val()),$(i).siblings().show()),$(i).closest("li").children(".buttonPreloaderInput").remove(),$("#valueChanged").val("")},s=function(){$(i).closest("li").children(".buttonPreloaderInput").remove()};n.prototype.ajaxJSONRequest.call(this,e,o,s,u)},t.prototype.ajaxRequestForSavingCompetitionPageContent=function(i){var u,r,f;if($(i).hasClass("disabledStatus"))return!1;$(i).addClass("disabledStatus"),$(".textEditor").append($(".buttonPreloaderTxtArea").clone()),$(".textEditor > .buttonPreloaderTxtArea").show(),f=$(".competitionsDetailTabTop > li.active").hasClass("tab1")?$("#textEditorTxtArea").val():$("#textEditorTxtArea1").val(),u=$.trim($(".textEditorLftTab li.active").attr("id").replace("tab","")),r=r={rank:u,markup:"",html:f};var e="/api/competition/"+parseInt($("#CompetitionId").val())+"/pagecontent",o=function(n){t.prototype.managePublishButton(n.published),$(".textEditor > .buttonPreloaderTxtArea").remove(),$(i).removeClass("disabledStatus"),$("#valueChanged").val("")},s=function(){$(".textEditor > .buttonPreloaderTxtArea").remove(),$(this).removeClass("disabledStatus")};n.prototype.ajaxJSONRequest.call(this,e,o,s,r)},t.prototype.ajaxRequestForGettingCompetitionPageContent=function(n){var i="/My/competitions/details/"+parseInt($("#CompetitionId").val())+"/page/"+n,r=function(n){$(".competitionsDetailTabTop > li.active").hasClass("tab1")?$("#textEditorTxtArea").val(n):$("#textEditorTxtArea1").val(n)},u=function(){};t.prototype.ajaxGetRequest(i,r,u)},t.prototype.ajaxRequestForManagingPublishTab=function(){var n,i,r;n=$("#Public")[0].checked===!0?"/api/competition/"+parseInt($("#CompetitionId").val())+"/public":"/api/competition/"+parseInt($("#CompetitionId").val())+"/private",i=function(n){t.prototype.managePublishButton(n),$("#valueChanged").val("")},r=function(){},t.prototype.ajaxPostRequest(n,i,r)},t.prototype.confirmNavigation=function(){return $("#valueChanged").val()==="True"?confirm("You have changed the input value and Do you want to continue")?($("#valueChanged").val(""),!0):($("#Step").val($("#Step").val()),t.prototype.tabSelection(),t.prototype.changeSaveButtonText(),!1):!0},t.prototype.getLftTabsForCompetition=function(n){var i="/My/competitions/details/"+$("#CompetitionId").val()+"/tab/ "+n,r=function(i){n===0?($("#textEditorLftTab").html(""),$("#textEditorLftTab").append(i),$(".textEditorLftTab > li").removeClass("active"),$("#textEditorLftTab > li:first").addClass("active"),t.prototype.ajaxRequestForGettingCompetitionPageContent(parseInt($.trim($("#textEditorLftTab > li:first").attr("id").replace("tab",""))))):($("#CompetitionsDetailLftParticipateNav").html(""),$("#CompetitionsDetailLftParticipateNav").append(i),$(".textEditorLftTab > li").removeClass("active"),$("#CompetitionsDetailLftParticipateNav > li:first").addClass("active"),t.prototype.ajaxRequestForGettingCompetitionPageContent(parseInt($.trim($("#CompetitionsDetailLftParticipateNav > li:first").attr("id").replace("tab",""))))),$(".textEditorLftTab > li").click(function(){if($(this).hasClass("viewStateDisabled"))return!1;var n=$(this).attr("class");$(this).hasClass("active")||($(".textEditorLftTab > li").removeClass("active"),$(this).addClass("active"),$("#textEditorTxtArea").val(""),t.prototype.ajaxRequestForGettingCompetitionPageContent(parseInt($.trim($(this).attr("id").replace("tab","")))))}),$(".textEditorLftTab > li > div > a").click(function(n){$(this).parent().parent().children("label").show(),$(this).parent().parent().children("input").hide(),$(this).parent().parent().hasClass("viewStateOff")?($(".textEditorLftTab > li").removeClass("active"),$(this).parent().parent().removeClass("viewStateOff"),$(this).parent().parent().addClass("active"),t.prototype.ajaxRequestForSavingCompetitionPageLabel(this)):($(this).parent().parent().addClass("viewStateOff"),t.prototype.ajaxRequestForSavingCompetitionPageLabel(this),n.stopPropagation())}),$(".textEditorLftTab > li > label").dblclick(function(n){$(this).parent().hasClass("viewStateAlwaysOn")||$(this).parent().hasClass("viewStateOff")||($(this).hide(),$(this).siblings().show(),n.stopPropagation())}),$(".textEditorLftTab > li > input").bind("keypress blur",function(n){var i=n.keyCode||n.which;(i===13||i===9||n.type=="blur")&&(n.preventDefault(),t.prototype.ajaxRequestForSavingCompetitionPageLabel(this))})},u=function(){};t.prototype.ajaxGetRequest(i,r,u)},t.prototype.genaraltabSelection=function(){t.prototype.tabSelection()},t.prototype.changeSaveButtonTextValue=function(){t.prototype.changeSaveButtonText()},t.prototype.savePhases=function(n){$("#savePhaseProcess").show(),$(n).addClass("disabledStatus");var i="/api/competition/"+$("#CompetitionId").val()+"/phases/",r={label:$("#ph1title").val(),maxSubmissions:$("#ph1SubmissionLmt").val(),startDate:$("#ph1StartDate").val()},u={label:$("#ph2title").val(),maxSubmissions:$("#ph2SubmissionLmt").val(),startDate:$("#ph2StartDate").val()},f={endDate:$("#competitionEndDate").val(),phases:[r,u]},e=function(){$(n).removeClass("disabledStatus"),$("#savePhaseProcess").hide(),$("#Public")[0].checked&&$("#btnPublish").removeClass("disabledStatus"),t.prototype.makePublicNotification(),$("#valueChanged").val("")},o=function(t,i,r){alert("An error occured ["+r+"]"),$(n).removeClass("disabledStatus"),$("#savePhaseProcess").hide()};t.prototype.ajaxJSONRequest(i,e,o,f)},t.prototype.getPhasesDetails=function(){var n="/api/competition/"+$("#CompetitionId").val()+"/phases/",i=function(n){$("#ph1title").val(n.phases[0].label),$("#ph2title").val(n.phases[1].label),$("#ph1SubmissionLmt").val(n.phases[0].maxSubmissions),$("#ph2SubmissionLmt").val(n.phases[1].maxSubmissions),n.phases[0].startDate!==null&&n.phases[0].startDate!==undefined?$("#ph1StartDate").val($.datepicker.formatDate("mm/dd/yy",new Date(n.phases[0].startDate))):$("#ph1StartDate").val(""),n.phases[0].startDate!==null&&n.phases[0].startDate!==undefined?$("#ph2StartDate").val($.datepicker.formatDate("mm/dd/yy",new Date(n.phases[1].startDate))):$("#ph2StartDate").val(""),n.endDate!==null&&n.endDate!==undefined?$("#competitionEndDate").val($.datepicker.formatDate("mm/dd/yy",new Date(n.endDate))):$("#competitionEndDate").val("")},r=function(n,t,i){alert("An error occured ["+i+"]")};t.prototype.ajaxGetRequest(n,i,r)},t.prototype.toggleDataset=function(n){if($(n).parents("section").siblings(".downloadedContainer").is(":visible"))$(n).children("div").removeClass().addClass("expCollDatasetExp"),$(n).parents("section").siblings(".downloadedContainer").hide();else{$(n).children("div > div").removeClass().addClass("expCollDatasetColl"),$(n).parents("section").siblings(".downloadedContainer").show();var i=$(n).parents("section").siblings(".downloadedContainer").children("input:hidden").val();t.prototype.getDataSet(parseInt(i))}},t.prototype.getDataSet=function(n){n===1?($("#downloadedContainer .phaseDatasetDetails").remove(),$("#preLoaderPh1").show()):($("#preLoaderPh2").show(),$("#downloadedContainer2 .phaseDatasetDetails").remove());var i="/api/competition/"+$("#CompetitionId").val()+"/phase/"+n+"/dataset",r=function(t){var r,i;for(r in t)i=$("#divDownloadedContainer").clone(),$(i).attr("id",r+"divDownloadedContainer"),$(i).find("input:#hidDatasetId").val(t[r].DatasetId),$(i).find("input:#SourceUrl").val(t[r].SourceUrl),$(i).find("input:#DownloadUrl").val(t[r].DownloadUrl),t[r].Type===2?$(i).find("input:#dataSetType").val("Azure Blob"):$(i).find("input:#dataSetType").val("Azure Blob Shared Access Signature"),n===1?$("#downloadedContainer").append($(i).show()):$("#downloadedContainer2").append($(i).show());$("#preLoaderPh1").hide(),$("#preLoaderPh2").hide()},u=function(n,t,i){alert("An error occured ["+i+"]"),$("#preLoaderPh1").hide(),$("#preLoaderPh2").hide()};t.prototype.ajaxGetRequest(i,r,u)},t.prototype.previousStep=function(n,i){$("#Step").val((parseInt($("#Step").val())-1).toString()),t.prototype.tabSelection(),t.prototype.changeSaveButtonText(),i.preventDefault()},t.prototype.nextStep=function(n,i){$("#Step").val((parseInt($("#Step").val())+1).toString()),$("#Step").val()>4?$("#SaveFlag").val("False"):(t.prototype.tabSelection(),t.prototype.changeSaveButtonText(),$(n).removeClass("disabledStatus"),i.preventDefault())},t}(FileUpload.FileUploadFile);n.CreateCompetition=t})(Competition||(Competition={})),$(function(){var n=new Competition.CreateCompetition;$(".uploadLabel").click(function(){$("#UploadReason").val("1"),$("#uploadFile").click()}),$("#tabs").tabs(),$(".headerNavigation li.active").removeClass("active"),$("#liMycodeLab").addClass("active"),n.genaraltabSelection(),n.changeSaveButtonTextValue(),$("#btnSaveConti").click(function(t){$(this).hasClass("disabledStatus")&&t.preventDefault(),$(this).addClass("disabledStatus"),n.saveContinue(t,this)}),$("#btnSave").click(function(t){$(this).hasClass("disabledStatus")&&t.preventDefault(),$(this).addClass("disabledStatus"),n.save(t,this)}),$("#aTab1").click(function(){n.tabOnClick(this)}),$("#aTab2").click(function(){n.tabOnClick(this)}),$("#aTab3").click(function(){n.tabOnClick(this)}),$("#aTab4").click(function(){n.tabOnClick(this)}),$("input[type=Text]").bind("change input keydown keypress blur",function(t){n.setValueChanged(t,this)}),$(".competitionsDetailTabTop > li").click(function(){if(!$(this).hasClass("viewStateOff")){var t=$(this).attr("class");$(this).hasClass("active")||($(".competitionsDetailTabTop > li").removeClass("active"),$(this).addClass("active"),$(".competitionsDetailTabBlock > li").css("display","none"),$(".competitionsDetailTabBlock").children("."+t).css("display","block"),n.getLftTabsForCompetition(parseInt($.trim(t.replace("tab","")))-1)),t==="tab1"?($("#applyChanges").css("display","table-cell"),$("#applyChangesparticep").hide()):($("#applyChangesparticep").css("display","table-cell"),$("#applyChanges").hide())}}),n.getLftTabsForCompetition(0),$(".textEditorLftTab > li").click(function(){var n=$(this).attr("class");$(this).hasClass("active")||($(".textEditorLftTab > li").removeClass("active"),$(this).addClass("active"),$("#textEditorTxtArea").text(""))}),$("#applyChanges,#applyChangesparticep").click(function(){n.ajaxRequestForSavingCompetitionPageContent(this)}),$("#Public").click(function(){n.ajaxRequestForManagingPublishTab()}),$("#btnPublish").click(function(){$("#btnPublish").hasClass("disabledStatus")||n.ajaxRequestForManagingPublishTab()}),$("#uploadFile").change(function(){$("#UploadReason").val()==="3"?n.uploadFile(3):n.uploadFile(1)}),$("#ph1StartDate").datepicker(),$("#ph1StartDateIcon").click(function(){$("#ph1StartDate").datepicker("show")}),$("#ph2StartDateIcon").click(function(){$("#ph2StartDate").datepicker("show")}),$("#ph2StartDate").datepicker({onSelect:function(){if($("#ph1StartDate").val()==="")return alert("Please enter Training phase start"),$("#ph2StartDate").val(""),!1;var n=new Date($(this).datepicker("getDate").toString()),t=new Date($("#ph1StartDate").datepicker("getDate").toString()),i=Math.ceil((n.getTime()-t.getTime())/864e5);i<1&&(alert("There should be atleast one day differance between training phase and testing phase"),$("#ph2StartDate").val(""))}}),$("#competitionEndDate").datepicker(),$("#competitionEndDateIcon").click(function(){$("#competitionEndDate").datepicker("show")}),$("#savePhase").click(function(){var t=$("#ph1StartDate").val(),i=$("#ph2StartDate").val();if(t==="")return alert("Please enter Training phase start date"),!1;if(i==="")return alert("Please enter testing phase start date."),!1;n.savePhases(this)}),n.getPhasesDetails(),$("#ph1dataset,#ph2dataset,#ph2datasetimg,#ph1datasetimg").click(function(){n.toggleDataset(this)}),$("#btnSavePrev").click(function(t){$(this).hasClass("disabledStatus")&&t.preventDefault(),n.previousStep(this,t)}),n.makePublicNotification(),$("#uploadManifestph1").click(function(){$("#UploadReason").val("3"),FileUpload.FileUploadFile.phaseValue=1,$("#uploadFile").click()}),$("#uploadManifestph2").click(function(){$("#UploadReason").val("3"),FileUpload.FileUploadFile.phaseValue=2,$("#uploadFile").click()})}),window.onbeforeunload=function(){if($("#valueChanged").val()==="True")return"You're about to end your session, are you sure?"}