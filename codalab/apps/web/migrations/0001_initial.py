# -*- coding: utf-8 -*-
# Generated by Django 1.11.11 on 2018-04-03 01:49
from __future__ import unicode_literals

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import mptt.fields
import storages.backends.s3boto
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('teams', '0001_initial'),
        ('queues', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='Competition',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('chahub_timestamp', models.DateTimeField(blank=True, null=True)),
                ('chahub_data_hash', models.TextField(blank=True, null=True)),
                ('chahub_needs_retry', models.BooleanField(default=False)),
                ('title', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('image', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local'), upload_to=b'logos', verbose_name=b'Logo')),
                ('image_url_base', models.CharField(max_length=255)),
                ('has_registration', models.BooleanField(default=False, verbose_name=b'Registration Required')),
                ('start_date', models.DateTimeField(blank=True, null=True, verbose_name=b'Start Date (UTC)')),
                ('end_date', models.DateTimeField(blank=True, null=True, verbose_name=b'End Date (UTC)')),
                ('last_modified', models.DateTimeField(auto_now_add=True)),
                ('published', models.BooleanField(default=False, verbose_name=b'Publicly Available')),
                ('last_phase_migration', models.PositiveIntegerField(default=1)),
                ('is_migrating', models.BooleanField(default=False)),
                ('force_submission_to_leaderboard', models.BooleanField(default=False)),
                ('disallow_leaderboard_modifying', models.BooleanField(default=False)),
                ('secret_key', models.UUIDField(default=uuid.UUID('cf351941-ef4b-415a-91ae-4b69c976d61b'))),
                ('enable_medical_image_viewer', models.BooleanField(default=False)),
                ('enable_detailed_results', models.BooleanField(default=False)),
                ('original_yaml_file', models.TextField(blank=True, default=b'', null=True)),
                ('show_datasets_from_yaml', models.BooleanField(default=True)),
                ('reward', models.PositiveIntegerField(blank=True, null=True)),
                ('is_migrating_delayed', models.BooleanField(default=False)),
                ('allow_teams', models.BooleanField(default=False)),
                ('enable_per_submission_metadata', models.BooleanField(default=False, help_text=b'(Team name, Method name, Method description, etc.)')),
                ('allow_public_submissions', models.BooleanField(default=False, verbose_name=b'Allow sharing of public submissions')),
                ('enable_forum', models.BooleanField(default=False)),
                ('anonymous_leaderboard', models.BooleanField(default=False)),
                ('enable_teams', models.BooleanField(default=False, verbose_name=b'Enable Competition level teams')),
                ('require_team_approval', models.BooleanField(default=True, verbose_name=b'Organizers need to approve the new teams')),
                ('hide_top_three', models.BooleanField(default=False, verbose_name=b'Hide Top Three Leaderboard')),
                ('hide_chart', models.BooleanField(default=False, verbose_name=b'Hide Chart')),
                ('competition_docker_image', models.CharField(blank=True, default=b'', max_length=128)),
                ('admins', models.ManyToManyField(blank=True, null=True, related_name='competition_admins', to=settings.AUTH_USER_MODEL)),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='competitioninfo_creator', to=settings.AUTH_USER_MODEL)),
                ('modified_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='competitioninfo_modified_by', to=settings.AUTH_USER_MODEL)),
                ('queue', models.ForeignKey(blank=True, help_text=b"(don't change this unless you have a reason to, default/empty is fine)", null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='competitions', to='queues.Queue')),
                ('teams', models.ManyToManyField(blank=True, null=True, related_name='competition_teams', to='teams.Team')),
            ],
            options={
                'ordering': ['end_date'],
                'permissions': (('is_owner', 'Owner'), ('can_edit', 'Edit')),
            },
        ),
        migrations.CreateModel(
            name='CompetitionDefBundle',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('config_bundle', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'')),
                ('s3_config_bundle', models.FileField(blank=True, null=True, upload_to=b'')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='owner', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='CompetitionDump',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('status', models.CharField(default=b'Starting', max_length=64)),
                ('data_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'competition_dump', verbose_name=b'Data file')),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dumps', to='web.Competition')),
            ],
        ),
        migrations.CreateModel(
            name='CompetitionParticipant',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('reason', models.CharField(blank=True, max_length=100, null=True)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='participants', to='web.Competition')),
            ],
        ),
        migrations.CreateModel(
            name='CompetitionPhase',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('phasenumber', models.PositiveIntegerField(verbose_name=b'Number')),
                ('label', models.CharField(blank=True, max_length=50, verbose_name=b'Name')),
                ('start_date', models.DateTimeField(verbose_name=b'Start Date (UTC)')),
                ('max_submissions', models.PositiveIntegerField(default=100, verbose_name=b'Maximum Submissions (per User)')),
                ('max_submissions_per_day', models.PositiveIntegerField(default=999, verbose_name=b'Max Submissions (per User) per day')),
                ('is_scoring_only', models.BooleanField(default=True, verbose_name=b'Results Scoring Only')),
                ('scoring_program', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'phase_scoring_program_file', verbose_name=b'Scoring Program')),
                ('reference_data', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'phase_reference_data_file', verbose_name=b'Reference Data')),
                ('input_data', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'phase_input_data_file', verbose_name=b'Input Data')),
                ('leaderboard_management_mode', models.CharField(default=b'default', max_length=50, verbose_name=b'Leaderboard Mode')),
                ('force_best_submission_to_leaderboard', models.BooleanField(default=False, verbose_name=b'If submission beats old score, put submission on leaderboard')),
                ('auto_migration', models.BooleanField(default=False)),
                ('is_migrated', models.BooleanField(default=False)),
                ('execution_time_limit', models.PositiveIntegerField(default=300, verbose_name=b'Execution time limit (in seconds)')),
                ('color', models.CharField(blank=True, choices=[(b'white', b'White'), (b'orange', b'Orange'), (b'yellow', b'Yellow'), (b'green', b'Green'), (b'blue', b'Blue'), (b'purple', b'Purple')], max_length=24, null=True)),
                ('phase_never_ends', models.BooleanField(default=False)),
                ('scoring_program_docker_image', models.CharField(blank=True, default=b'', max_length=128)),
                ('default_docker_image', models.CharField(blank=True, default=b'', max_length=128)),
                ('disable_custom_docker_image', models.BooleanField(default=True)),
                ('starting_kit', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'starting_kit', verbose_name=b'Starting Kit')),
                ('public_data', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'public_data', verbose_name=b'Public Data')),
                ('ingestion_program', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'ingestion_program')),
                ('ingestion_program_docker_image', models.CharField(blank=True, default=b'', max_length=128)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='phases', to='web.Competition')),
            ],
            options={
                'ordering': ['phasenumber'],
            },
        ),
        migrations.CreateModel(
            name='CompetitionSubmission',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('chahub_timestamp', models.DateTimeField(blank=True, null=True)),
                ('chahub_data_hash', models.TextField(blank=True, null=True)),
                ('chahub_needs_retry', models.BooleanField(default=False)),
                ('secret', models.CharField(blank=True, default=b'', max_length=128)),
                ('docker_image', models.CharField(blank=True, default=b'', max_length=128)),
                ('file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'')),
                ('s3_file', models.FileField(blank=True, null=True, upload_to=b'')),
                ('file_url_base', models.CharField(blank=True, max_length=2000)),
                ('readable_filename', models.TextField(blank=True, null=True)),
                ('description', models.CharField(blank=True, max_length=256)),
                ('inputfile', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_inputfile')),
                ('runfile', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_runfile')),
                ('submitted_at', models.DateTimeField(auto_now_add=True)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('execution_key', models.TextField(blank=True, default=b'')),
                ('status_details', models.CharField(blank=True, max_length=100, null=True)),
                ('submission_number', models.PositiveIntegerField(default=0)),
                ('output_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_output')),
                ('private_output_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_private_output')),
                ('stdout_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_stdout')),
                ('stderr_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_stderr')),
                ('history_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_history')),
                ('scores_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_scores')),
                ('coopetition_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_coopetition')),
                ('detailed_results_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_detailed_results')),
                ('prediction_runfile', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_prediction_runfile')),
                ('prediction_output_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'submission_prediction_output')),
                ('exception_details', models.TextField(blank=True, null=True)),
                ('prediction_stdout_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'predict_submission_stdout')),
                ('prediction_stderr_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'predict_submission_stderr')),
                ('ingestion_program_stdout_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'predict_submission_stdout')),
                ('ingestion_program_stderr_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'predict_submission_stderr')),
                ('method_name', models.CharField(blank=True, max_length=20, null=True)),
                ('method_description', models.TextField(blank=True, null=True)),
                ('project_url', models.URLField(blank=True, null=True)),
                ('publication_url', models.URLField(blank=True, null=True)),
                ('bibtex', models.TextField(blank=True, null=True)),
                ('organization_or_affiliation', models.CharField(blank=True, max_length=255, null=True)),
                ('team_name', models.CharField(blank=True, max_length=64, null=True)),
                ('is_public', models.BooleanField(default=False)),
                ('when_made_public', models.DateTimeField(blank=True, null=True)),
                ('when_unmade_public', models.DateTimeField(blank=True, null=True)),
                ('download_count', models.IntegerField(default=0)),
                ('like_count', models.IntegerField(default=0)),
                ('dislike_count', models.IntegerField(default=0)),
                ('is_migrated', models.BooleanField(default=False)),
                ('queue_name', models.TextField(blank=True, null=True)),
                ('participant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='submissions', to='web.CompetitionParticipant')),
                ('phase', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='submissions', to='web.CompetitionPhase')),
            ],
        ),
        migrations.CreateModel(
            name='CompetitionSubmissionMetadata',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_predict', models.BooleanField(default=False)),
                ('is_scoring', models.BooleanField(default=False)),
                ('hostname', models.CharField(blank=True, max_length=255, null=True)),
                ('processes_running_in_temp_dir', models.TextField(blank=True, null=True)),
                ('ingestion_program_duration', models.TextField(blank=True, null=True)),
                ('beginning_virtual_memory_usage', models.TextField(blank=True, null=True)),
                ('beginning_swap_memory_usage', models.TextField(blank=True, null=True)),
                ('beginning_cpu_usage', models.TextField(blank=True, null=True)),
                ('end_virtual_memory_usage', models.TextField(blank=True, null=True)),
                ('end_swap_memory_usage', models.TextField(blank=True, null=True)),
                ('end_cpu_usage', models.TextField(blank=True, null=True)),
                ('submission', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='metadatas', to='web.CompetitionSubmission')),
            ],
        ),
        migrations.CreateModel(
            name='CompetitionSubmissionStatus',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=20)),
                ('codename', models.SlugField(max_length=20, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='ContentCategory',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('codename', models.SlugField(max_length=100, unique=True)),
                ('is_menu', models.BooleanField(default=True)),
                ('content_limit', models.PositiveIntegerField(default=1)),
                ('lft', models.PositiveIntegerField(db_index=True, editable=False)),
                ('rght', models.PositiveIntegerField(db_index=True, editable=False)),
                ('tree_id', models.PositiveIntegerField(db_index=True, editable=False)),
                ('level', models.PositiveIntegerField(db_index=True, editable=False)),
                ('parent', mptt.fields.TreeForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='web.ContentCategory')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='ContentVisibility',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=20)),
                ('codename', models.SlugField(max_length=20, unique=True)),
                ('classname', models.CharField(blank=True, max_length=30, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Dataset',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50)),
                ('description', models.TextField()),
                ('number', models.PositiveIntegerField(default=1)),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='datasets', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['number'],
            },
        ),
        migrations.CreateModel(
            name='DefaultContentItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('label', models.CharField(max_length=100)),
                ('codename', models.SlugField(max_length=100, unique=True)),
                ('rank', models.IntegerField(default=0)),
                ('required', models.BooleanField(default=False)),
                ('category', mptt.fields.TreeForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.ContentCategory')),
                ('initial_visibility', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.ContentVisibility')),
            ],
        ),
        migrations.CreateModel(
            name='ExternalFile',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('source_url', models.URLField()),
                ('source_address_info', models.CharField(blank=True, max_length=200)),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ExternalFileSource',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50)),
                ('codename', models.SlugField(unique=True)),
                ('service_url', models.URLField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='ExternalFileType',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=20)),
                ('codename', models.SlugField(max_length=20, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='OrganizerDataSet',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('full_name', models.TextField(default=b'')),
                ('type', models.CharField(choices=[(b'Reference Data', b'Reference Data'), (b'Scoring Program', b'Scoring Program'), (b'Input Data', b'Input Data'), (b'Ingestion Program', b'Ingestion Program'), (b'Starting Kit', b'Starting Kit'), (b'Public Data', b'Public Data'), (b'None', b'None')], default=b'None', max_length=64)),
                ('description', models.TextField(blank=True, null=True)),
                ('data_file', models.FileField(blank=True, null=True, storage=storages.backends.s3boto.S3BotoStorage(bucket_name=b'codalab-eric-local-private'), upload_to=b'dataset_data_file', verbose_name=b'Data file')),
                ('key', models.UUIDField()),
                ('sub_data_files', models.ManyToManyField(blank=True, null=True, to='web.OrganizerDataSet', verbose_name=b'Bundle of data files')),
                ('uploaded_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Page',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codename', models.SlugField(max_length=100)),
                ('title', models.CharField(blank=True, max_length=100, null=True)),
                ('label', models.CharField(max_length=100, verbose_name=b'Title')),
                ('rank', models.IntegerField(default=0, verbose_name=b'Order')),
                ('visibility', models.BooleanField(default=True, verbose_name=b'Visible')),
                ('markup', models.TextField(blank=True)),
                ('html', models.TextField(blank=True, verbose_name=b'Content')),
                ('category', mptt.fields.TreeForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.ContentCategory')),
                ('competition', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='pages', to='web.Competition')),
            ],
            options={
                'ordering': ['category', 'rank'],
            },
        ),
        migrations.CreateModel(
            name='PageContainer',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=200)),
                ('object_id', models.PositiveIntegerField(db_index=True)),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.ContentType')),
            ],
        ),
        migrations.CreateModel(
            name='ParticipantStatus',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=30)),
                ('codename', models.CharField(max_length=30, unique=True)),
                ('description', models.CharField(max_length=50)),
            ],
        ),
        migrations.CreateModel(
            name='PhaseLeaderBoard',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('phase', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='board', to='web.CompetitionPhase')),
            ],
        ),
        migrations.CreateModel(
            name='PhaseLeaderBoardEntry',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('board', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='entries', to='web.PhaseLeaderBoard')),
                ('result', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leaderboard_entry_result', to='web.CompetitionSubmission')),
            ],
        ),
        migrations.CreateModel(
            name='SubmissionComputedScore',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('operation', models.CharField(choices=[(b'Max', b'Max'), (b'Avg', b'Average')], max_length=10)),
            ],
        ),
        migrations.CreateModel(
            name='SubmissionComputedScoreField',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('computed', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fields', to='web.SubmissionComputedScore')),
            ],
        ),
        migrations.CreateModel(
            name='SubmissionResultGroup',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('key', models.CharField(max_length=50)),
                ('label', models.CharField(max_length=50)),
                ('ordering', models.PositiveIntegerField(default=1)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.Competition')),
            ],
            options={
                'ordering': ['ordering'],
            },
        ),
        migrations.CreateModel(
            name='SubmissionResultGroupPhase',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('group', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.SubmissionResultGroup')),
                ('phase', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.CompetitionPhase')),
            ],
        ),
        migrations.CreateModel(
            name='SubmissionScore',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('value', models.DecimalField(decimal_places=10, max_digits=20)),
                ('result', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='scores', to='web.CompetitionSubmission')),
            ],
        ),
        migrations.CreateModel(
            name='SubmissionScoreDef',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('key', models.SlugField()),
                ('label', models.CharField(max_length=50)),
                ('sorting', models.SlugField(choices=[(b'asc', b'Ascending'), (b'desc', b'Descending')], default=b'asc', max_length=20)),
                ('numeric_format', models.CharField(blank=True, max_length=20, null=True)),
                ('show_rank', models.BooleanField(default=False)),
                ('selection_default', models.IntegerField(default=0)),
                ('computed', models.BooleanField(default=False)),
                ('ordering', models.PositiveIntegerField(default=1)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.Competition')),
            ],
        ),
        migrations.CreateModel(
            name='SubmissionScoreDefGroup',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('group', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.SubmissionResultGroup')),
                ('scoredef', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.SubmissionScoreDef')),
            ],
        ),
        migrations.CreateModel(
            name='SubmissionScoreSet',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('key', models.CharField(max_length=50)),
                ('label', models.CharField(max_length=50)),
                ('ordering', models.PositiveIntegerField(default=1)),
                ('lft', models.PositiveIntegerField(db_index=True, editable=False)),
                ('rght', models.PositiveIntegerField(db_index=True, editable=False)),
                ('tree_id', models.PositiveIntegerField(db_index=True, editable=False)),
                ('level', models.PositiveIntegerField(db_index=True, editable=False)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.Competition')),
                ('parent', mptt.fields.TreeForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='web.SubmissionScoreSet')),
                ('scoredef', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='web.SubmissionScoreDef')),
            ],
        ),
        migrations.AddField(
            model_name='submissionscoredef',
            name='groups',
            field=models.ManyToManyField(through='web.SubmissionScoreDefGroup', to='web.SubmissionResultGroup'),
        ),
        migrations.AddField(
            model_name='submissionscore',
            name='scoredef',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.SubmissionScoreDef'),
        ),
        migrations.AddField(
            model_name='submissionresultgroup',
            name='phases',
            field=models.ManyToManyField(through='web.SubmissionResultGroupPhase', to='web.CompetitionPhase'),
        ),
        migrations.AddField(
            model_name='submissioncomputedscorefield',
            name='scoredef',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.SubmissionScoreDef'),
        ),
        migrations.AddField(
            model_name='submissioncomputedscore',
            name='scoredef',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='computed_score', to='web.SubmissionScoreDef'),
        ),
        migrations.AddField(
            model_name='page',
            name='container',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pages', to='web.PageContainer', verbose_name=b'Page Container'),
        ),
        migrations.AddField(
            model_name='page',
            name='defaults',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='web.DefaultContentItem'),
        ),
        migrations.AddField(
            model_name='externalfile',
            name='type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.ExternalFileType'),
        ),
        migrations.AddField(
            model_name='dataset',
            name='datafile',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.ExternalFile'),
        ),
        migrations.AddField(
            model_name='contentcategory',
            name='visibility',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.ContentVisibility'),
        ),
        migrations.AddField(
            model_name='competitionsubmission',
            name='status',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.CompetitionSubmissionStatus'),
        ),
        migrations.AddField(
            model_name='competitionsubmission',
            name='team',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='team', to='teams.Team'),
        ),
        migrations.AddField(
            model_name='competitionphase',
            name='datasets',
            field=models.ManyToManyField(blank=True, related_name='phase', to='web.Dataset'),
        ),
        migrations.AddField(
            model_name='competitionphase',
            name='ingestion_program_organizer_dataset',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ingestion_program_organizer_dataset', to='web.OrganizerDataSet'),
        ),
        migrations.AddField(
            model_name='competitionphase',
            name='input_data_organizer_dataset',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='input_data_organizer_dataset', to='web.OrganizerDataSet', verbose_name=b'Input Data'),
        ),
        migrations.AddField(
            model_name='competitionphase',
            name='public_data_organizer_dataset',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='public_data_organizer_dataset', to='web.OrganizerDataSet', verbose_name=b'Public Data'),
        ),
        migrations.AddField(
            model_name='competitionphase',
            name='reference_data_organizer_dataset',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reference_data_organizer_dataset', to='web.OrganizerDataSet', verbose_name=b'Reference Data'),
        ),
        migrations.AddField(
            model_name='competitionphase',
            name='scoring_program_organizer_dataset',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='scoring_program_organizer_dataset', to='web.OrganizerDataSet', verbose_name=b'Scoring Program'),
        ),
        migrations.AddField(
            model_name='competitionphase',
            name='starting_kit_organizer_dataset',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='starting_kit_organizer_dataset', to='web.OrganizerDataSet', verbose_name=b'Starting Kit'),
        ),
        migrations.AddField(
            model_name='competitionparticipant',
            name='status',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='web.ParticipantStatus'),
        ),
        migrations.AddField(
            model_name='competitionparticipant',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='participation', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterUniqueTogether(
            name='submissionscoreset',
            unique_together=set([('key', 'competition')]),
        ),
        migrations.AlterUniqueTogether(
            name='submissionscoredefgroup',
            unique_together=set([('scoredef', 'group')]),
        ),
        migrations.AlterUniqueTogether(
            name='submissionscoredef',
            unique_together=set([('key', 'competition')]),
        ),
        migrations.AlterUniqueTogether(
            name='submissionscore',
            unique_together=set([('result', 'scoredef')]),
        ),
        migrations.AlterUniqueTogether(
            name='submissionresultgroupphase',
            unique_together=set([('group', 'phase')]),
        ),
        migrations.AlterUniqueTogether(
            name='phaseleaderboardentry',
            unique_together=set([('board', 'result')]),
        ),
        migrations.AlterUniqueTogether(
            name='pagecontainer',
            unique_together=set([('object_id', 'content_type')]),
        ),
        migrations.AlterUniqueTogether(
            name='page',
            unique_together=set([('label', 'category', 'container')]),
        ),
        migrations.AlterUniqueTogether(
            name='competitionsubmission',
            unique_together=set([('submission_number', 'phase', 'participant')]),
        ),
        migrations.AlterUniqueTogether(
            name='competitionparticipant',
            unique_together=set([('user', 'competition')]),
        ),
    ]
